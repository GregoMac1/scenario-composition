{% extends "analyzer/layout.html" %}
{% block title %}Árbol de Episodios - {{ scenario.title }}{% endblock %}
{% block content %}
  {% load static %}
  
  <h1>Árbol de Episodios: {{ scenario.title }}</h1>
  <p><strong>Proyecto:</strong> {{ project.name }}</p>
  
  <div class="mb-3">
    <button class="btn btn-primary" id="exportar" onclick="exportar()">Exportar</button>
    <a href="{% url 'project_detail' project.id %}" class="btn btn-secondary ml-2">← Volver al proyecto</a>
  </div>
  
  <div id="episode-tree-container" class="tree-container"></div>

  <script>
    // Pass the tree data to the global scope for the D3 script to access
    window.scenario = {
      value: '{{ tree_data|escapejs }}'
    };
  </script>
  
  <script type="module" src="{% static 'analyzer/episode-tree.js' %}"></script>
{% endblock %}