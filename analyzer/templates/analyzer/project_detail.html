{% extends "analyzer/layout.html" %}
{% block title %}{{ project.name }}{% endblock %}
{% block content %}
  <h1>{{ project.name }}</h1>
  <p>{{ project.description }}</p>
  
  <p class="mb-3">
    <a href="{% url 'edit_project' project.id %}" class="btn btn-secondary">Editar Proyecto</a>
    <a href="{% url 'delete_project' project.id %}" class="btn btn-danger">Eliminar Proyecto</a>
  </p>

  <h2>Escenarios</h2>
  <p>
    <a href="{% url 'create_scenario' project.id %}" class="main-button">+ Agregar nuevo escenario</a>
  </p>
  <ul>
    {% for scenario in scenarios %}
    <li class="card">
      <strong>{{ scenario.title }}</strong><br />
      <div class="mt-2">
        <a href="{% url 'edit_scenario' project.id scenario.id %}" class="btn btn-secondary">Editar</a>
        <a href="{% url 'episode_tree' project.id scenario.id %}" class="btn btn-primary">Ver Árbol de Episodios</a>
        <a href="{% url 'delete_scenario' project.id scenario.id %}" class="btn btn-danger">Eliminar</a>
      </div><br />
      <strong>Objetivo:</strong> {{ scenario.goal }}<br />
      <strong>Contexto:</strong> {{ scenario.context }}<br />
      <strong>Episodios:</strong>
      <div class="episode-container">
        {% for episode in scenario.episodes.splitlines %}
        {% if episode.strip %}
        <div class="episode-original">Original: {{ episode }}</div>
        {% endif %}
        {% endfor %}
        {% if scenario.episodes_lemmas %}
        <div class="episode-processed">
          Procesado: {{ scenario.episodes_lemmas|join:"<br />" }}
        </div>
        {% endif %}
      </div>
    </li>
    {% empty %}
    <li class="card">No hay escenarios para este proyecto.</li>
    {% endfor %}
  </ul>

  <h2>Diccionario</h2>
  <p><a href="{% url 'dictionary_list' project.id %}" class="btn btn-primary">Ver diccionario</a></p>

  <h2>Composición de Episodios</h2>
  <p>
    <a href="{% url 'project_composition' project.id %}" class="btn btn-primary">Ver análisis de composición de episodios</a>
  </p>

  <p class="mt-3"><a href="{% url 'project_list' %}">← Volver a proyectos</a></p>
{% endblock %}